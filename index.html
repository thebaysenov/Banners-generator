<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ë–∞–Ω–Ω–µ—Ä–æ–≤ (High Quality)</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #eef2f6;
            display: flex;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* --- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê --- */
        .sidebar {
            width: 340px;
            background: white;
            border-right: 1px solid #ddd;
            display: flex;
            flex-direction: column;
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
            overflow-y: auto;
            flex-shrink: 0;
            z-index: 10;
        }

        h2 {
            margin: 0 0 20px 0;
            font-size: 20px;
            color: #333;
        }

        h3 {
            margin: 20px 0 10px 0;
            font-size: 14px;
            color: #0055FF;
            text-transform: uppercase;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 5px;
        }

        .input-group {
            margin-bottom: 12px;
        }

        label {
            display: block;
            font-size: 11px;
            font-weight: bold;
            color: #666;
            margin-bottom: 4px;
        }

        input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            box-sizing: border-box;
        }

        .btn-download {
            margin-top: 20px;
            padding: 15px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: 0.2s;
        }

        .btn-download:hover {
            background: #218838;
        }

        .btn-download:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .status-text {
            margin-top: 10px;
            font-size: 12px;
            text-align: center;
            color: #666;
            min-height: 15px;
        }

        /* --- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê --- */
        .preview-area {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            background-color: #f4f6f8;
        }

        .lottery-section {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 40px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #0055ff;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .banners-row {
            display: flex;
            flex-direction: row;
            gap: 20px;
            align-items: flex-start;
            flex-wrap: wrap;
        }

        /* –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï –ü–†–ï–í–¨–Æ */
        .scale-container {
            position: relative;
            transform-origin: top left;
        }

        .cont-mob {
            width: 216px;
            height: 384px;
        }

        .cont-desk {
            width: 384px;
            height: 216px;
        }

        .cont-tab {
            width: 205px;
            height: 154px;
        }

        .scale-wrapper {
            transform: scale(0.2);
            transform-origin: top left;
        }

        /* –ë–ê–ù–ù–ï–† */
        .banner-canvas {
            position: relative;
            background-size: cover;
            background-position: center;
            overflow: hidden;
            background-color: #eee;
            box-shadow: 0 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .text-overlay {
            position: absolute;
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            color: white; /* –ë–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤ */
            line-height: 1;
            white-space: nowrap;
        }

        /* üî•üî•üî• –ù–ê–°–¢–†–û–ô–ö–ê –¶–í–ï–¢–ê –î–õ–Ø LOTO 6/49 üî•üî•üî• */
        /* –ú–µ–Ω—è–π—Ç–µ —Ü–≤–µ—Ç (HEX –∫–æ–¥) –ø—Ä—è–º–æ –∑–¥–µ—Å—å. –≠—Ç–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç –±–µ–ª—ã–π —Ü–≤–µ—Ç –≤—ã—à–µ */
        .val_649_jackpot, 
        .val_649_price {
            color: #245297; /* <-- –í–ü–ò–®–ò–¢–ï –°–Æ–î–ê –ù–£–ñ–ù–´–ô –¶–í–ï–¢ */
        }
        /* üî•üî•üî• –ö–û–ù–ï–¶ –ù–ê–°–¢–†–û–ô–ö–ò –¶–í–ï–¢–ê 6/49 üî•üî•üî• */


        /* --- –û–ë–©–ò–ï –ö–û–û–†–î–ò–ù–ê–¢–´ --- */

        /* 1. MOBILE (1080 x 1920) */
        .size-mob {
            width: 1080px;
            height: 1920px;
        }

        .mob-jackpot {
            left: 140px;
            top: 1100px;
            font-size: 104px;
        }

        .mob-price {
            left: 353px;
            top: 1670px;
            font-size: 90px;
        }

        /* 2. DESKTOP (1920 x 1080) */
        .size-desk {
            width: 1920px;
            height: 1080px;
        }

        .desk-jackpot {
            left: 1070px;
            top: 790px;
            font-size: 100px;
        }

        .desk-price {
            left: 330px;
            top: 890px;
            font-size: 90px;
        }

        /* 3. TABLET (1024 x 768) */
        .size-tab {
            width: 1024px;
            height: 768px;
        }

        .tab-jackpot {
            left: 550px;
            top: 580px;
            font-size: 64px;
        }

        .tab-price {
            left: 200px;
            top: 624px;
            font-size: 50px;
        }

        /* --- –§–û–ù–´ --- */
        #b_tb_mob { background-image: url('tb_mob.png'); }
        #b_tb_desk { background-image: url('tb_desk.png'); }
        #b_tb_tab { background-image: url('tb_tab.png'); }

        #b_649_mob { background-image: url('649_mob.png'); }
        #b_649_desk { background-image: url('649_desk.png'); }
        #b_649_tab { background-image: url('649_tab.png'); }

        #b_536_mob { background-image: url('536_mob.png'); }
        #b_536_desk { background-image: url('536_desk.png'); }
        #b_536_tab { background-image: url('536_tab.png'); }


        /* üî•üî•üî• –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ü–û–ü–†–ê–í–ö–ò –î–õ–Ø TELEBINGO üî•üî•üî• */
        .mob-price.target-tb-price {
            top: 1670px;
            left: 353px;
        }

        .desk-price.target-tb-price {
            top: 880px;
            left: 338px;
        }

        .tab-price.target-tb-price {
            top: 620px;
            left: 220px;
        }
        
        /* üî• –î–ñ–ï–ö–ü–û–¢–´ TELEBINGO (–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç) üî• */
        .mob-jackpot.target-tb-jackpot {
            top: 1100px;  /* –ú–µ–Ω—è–π –∑–Ω–∞—á–µ–Ω–∏–µ –∑–¥–µ—Å—å */
            left: 140px;  /* –ò –∑–¥–µ—Å—å */
        }

        .desk-jackpot.target-tb-jackpot {
            top: 790px;
            left: 1070px;
        }

        .tab-jackpot.target-tb-jackpot {
            top: 580px;
            left: 490px;
        }
    </style>
</head>

<body>

    <div class="sidebar">
        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–Ω–Ω–µ—Ä–æ–≤</h2>

        <h3>TeleBingo</h3>
        <div class="input-group">
            <label>–î–∂–µ–∫–ø–æ—Ç</label>
            <input type="text" id="in_tb_jackpot" placeholder="–°—É–º–º–∞" oninput="updateText('tb_jackpot', this.value)">
        </div>
        <div class="input-group">
            <label>–¶–µ–Ω–∞ –±–∏–ª–µ—Ç–∞</label>
            <input type="text" id="in_tb_price" placeholder="–¶–µ–Ω–∞" oninput="updateText('tb_price', this.value)">
        </div>

        <h3>Loto 6/49</h3>
        <div class="input-group">
            <label>–î–∂–µ–∫–ø–æ—Ç</label>
            <input type="text" id="in_649_jackpot" placeholder="–°—É–º–º–∞" oninput="updateText('649_jackpot', this.value)">
        </div>
        <div class="input-group">
            <label>–¶–µ–Ω–∞ –±–∏–ª–µ—Ç–∞</label>
            <input type="text" id="in_649_price" placeholder="–¶–µ–Ω–∞" oninput="updateText('649_price', this.value)">
        </div>

        <h3>Loto 5/36</h3>
        <div class="input-group">
            <label>–î–∂–µ–∫–ø–æ—Ç</label>
            <input type="text" id="in_536_jackpot" placeholder="–°—É–º–º–∞" oninput="updateText('536_jackpot', this.value)">
        </div>
        <div class="input-group">
            <label>–¶–µ–Ω–∞ –±–∏–ª–µ—Ç–∞</label>
            <input type="text" id="in_536_price" placeholder="–¶–µ–Ω–∞" oninput="updateText('536_price', this.value)">
        </div>

        <button class="btn-download" onclick="generateAll()" id="btnDownload">–°–∫–∞—á–∞—Ç—å ZIP (9 —à—Ç.)</button>
        <div class="status-text" id="statusText"></div>
    </div>

    <div class="preview-area">

        <div class="lottery-section">
            <div class="section-title">TeleBingo</div>
            <div class="banners-row">

                <div class="scale-container cont-mob">
                    <div class="scale-wrapper">
                        <div id="b_tb_mob" class="banner-canvas size-mob">
                            <div class="text-overlay mob-jackpot val_tb_jackpot target-tb-jackpot">0</div>
                            <div class="text-overlay mob-price target-tb-price val_tb_price">0</div>
                        </div>
                    </div>
                </div>

                <div class="scale-container cont-desk">
                    <div class="scale-wrapper">
                        <div id="b_tb_desk" class="banner-canvas size-desk">
                            <div class="text-overlay desk-jackpot val_tb_jackpot target-tb-jackpot">0</div>
                            <div class="text-overlay desk-price target-tb-price val_tb_price">0</div>
                        </div>
                    </div>
                </div>

                <div class="scale-container cont-tab">
                    <div class="scale-wrapper">
                        <div id="b_tb_tab" class="banner-canvas size-tab">
                            <div class="text-overlay tab-jackpot val_tb_jackpot target-tb-jackpot">0</div>
                            <div class="text-overlay tab-price target-tb-price val_tb_price">0</div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="lottery-section">
            <div class="section-title">Loto 6/49</div>
            <div class="banners-row">
                <div class="scale-container cont-mob">
                    <div class="scale-wrapper">
                        <div id="b_649_mob" class="banner-canvas size-mob">
                            <div class="text-overlay mob-jackpot val_649_jackpot">0</div>
                            <div class="text-overlay mob-price val_649_price">0</div>
                        </div>
                    </div>
                </div>
                <div class="scale-container cont-desk">
                    <div class="scale-wrapper">
                        <div id="b_649_desk" class="banner-canvas size-desk">
                            <div class="text-overlay desk-jackpot val_649_jackpot">0</div>
                            <div class="text-overlay desk-price val_649_price">0</div>
                        </div>
                    </div>
                </div>
                <div class="scale-container cont-tab">
                    <div class="scale-wrapper">
                        <div id="b_649_tab" class="banner-canvas size-tab">
                            <div class="text-overlay tab-jackpot val_649_jackpot">0</div>
                            <div class="text-overlay tab-price val_649_price">0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="lottery-section">
            <div class="section-title">Loto 5/36</div>
            <div class="banners-row">
                <div class="scale-container cont-mob">
                    <div class="scale-wrapper">
                        <div id="b_536_mob" class="banner-canvas size-mob">
                            <div class="text-overlay mob-jackpot val_536_jackpot">0</div>
                            <div class="text-overlay mob-price val_536_price">0</div>
                        </div>
                    </div>
                </div>
                <div class="scale-container cont-desk">
                    <div class="scale-wrapper">
                        <div id="b_536_desk" class="banner-canvas size-desk">
                            <div class="text-overlay desk-jackpot val_536_jackpot">0</div>
                            <div class="text-overlay desk-price val_536_price">0</div>
                        </div>
                    </div>
                </div>
                <div class="scale-container cont-tab">
                    <div class="scale-wrapper">
                        <div id="b_536_tab" class="banner-canvas size-tab">
                            <div class="text-overlay tab-jackpot val_536_jackpot">0</div>
                            <div class="text-overlay tab-price val_536_price">0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- –ß–ê–°–¢–¨ 1: –§–£–ù–ö–¶–ò–Ø –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ü–†–ï–í–¨–Æ ---
        function updateText(identifier, value) {
            const elements = document.querySelectorAll('.val_' + identifier);
            elements.forEach(el => {
                el.innerText = value;
            });
        }

        // --- –ß–ê–°–¢–¨ 2: –ê–í–¢–û-–°–û–•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–• ---
        document.addEventListener('DOMContentLoaded', () => {
            const inputs = document.querySelectorAll('input[type="text"]');

            inputs.forEach(input => {
                const savedValue = localStorage.getItem(input.id);
                
                if (savedValue) {
                    input.value = savedValue;
                    input.dispatchEvent(new Event('input')); 
                }

                input.addEventListener('input', (e) => {
                    localStorage.setItem(e.target.id, e.target.value);
                });
            });
        });

        // --- –ß–ê–°–¢–¨ 3: –ì–ï–ù–ï–†–ê–¶–ò–Ø (–° –ò–ó–ú–ï–ù–ï–ù–ù–´–ú–ò –ò–ú–ï–ù–ê–ú–ò –§–ê–ô–õ–û–í) ---
       async function generateAll() {
            const btn = document.getElementById('btnDownload');
            const status = document.getElementById('statusText');
            btn.disabled = true;
            status.innerText = "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π... –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ.";

            const zip = new JSZip();

            // ‚ö†Ô∏è –í–û–¢ –ó–î–ï–°–¨ –ò–ó–ú–ï–ù–ï–ù–´ –ò–ú–ï–ù–ê –§–ê–ô–õ–û–í –ù–ê –†–ê–ó–†–ï–®–ï–ù–ò–Ø ‚ö†Ô∏è
            const banners = [
                // TeleBingo
                { id: 'b_tb_mob', name: 'TeleBingo_1080x1920.png' },
                { id: 'b_tb_desk', name: 'TeleBingo_1920x1080.png' },
                { id: 'b_tb_tab', name: 'TeleBingo_1024x768.png' },
                
                // Loto 6/49
                { id: 'b_649_mob', name: 'Loto649_1080x1920.png' },
                { id: 'b_649_desk', name: 'Loto649_1920x1080.png' },
                { id: 'b_649_tab', name: 'Loto649_1024x768.png' },
                
                // Loto 5/36
                { id: 'b_536_mob', name: 'Loto536_1080x1920.png' },
                { id: 'b_536_desk', name: 'Loto536_1920x1080.png' },
                { id: 'b_536_tab', name: 'Loto536_1024x768.png' }
            ];

            try {
                for (let i = 0; i < banners.length; i++) {
                    const item = banners[i];
                    status.innerText = `–û–±—Ä–∞–±–æ—Ç–∫–∞ ${i + 1} –∏–∑ 9... (${item.name})`;
                    
                    const element = document.getElementById(item.id);
                    
                    const canvas = await html2canvas(element, {
                        scale: 1, // –†–∞–∑–º–µ—Ä 1 –∫ 1
                        useCORS: true, 
                        backgroundColor: null,
                        
                        onclone: (clonedDoc) => {
                            const clonedElement = clonedDoc.getElementById(item.id);
                            
                            // 1. –°–±—Ä–∞—Å—ã–≤–∞–µ–º –º–∞—Å—à—Ç–∞–±
                            const wrapper = clonedElement.closest('.scale-wrapper');
                            if (wrapper) {
                                wrapper.style.transform = 'none'; 
                            }

                            // 2. –£–±–∏—Ä–∞–µ–º —Ç–µ–Ω—å (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è)
                            clonedElement.style.boxShadow = 'none';
                        }
                    });

                    const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));
                    zip.file(item.name, blob);
                }

                status.innerText = "–ê—Ä—Ö–∏–≤–∞—Ü–∏—è...";
                const content = await zip.generateAsync({ type: "blob" });
                saveAs(content, "Banners_Pack_Optimized.zip");
                status.innerText = "–ì–æ—Ç–æ–≤–æ! –ê—Ä—Ö–∏–≤ —Å–∫–∞—á–∞–Ω.";

            } catch (err) {
                console.error(err);
                status.innerText = "–û—à–∏–±–∫–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å.";
                alert("–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—â–µ–Ω Live Server.");
            } finally {
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>